/*
 *  Vide - v0.1.0
 *  Easy as hell video background.
 *  http://vodkabears.github.io/vide/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(a,b,c){"use strict";function d(b,c,d){this.element=a(b),this._defaults=f,this._name=e;var g=c.lastIndexOf(".");c=c.slice(0,0>g?c.length:g),this.settings=a.extend({},f,d),this.path=c,this.init()}var e="vide",f={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%"};a[e]={lookup:[]};var g=function(a){var b,c,d={};b=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,","),c=b.split(",");var e,f,g;for(e=0,f=c.length;f>e;e++)c[e]=c[e].split(":"),g=c[e][1],("string"==typeof g||g instanceof String)&&(g="true"===g||("false"===g?!1:g)),("string"==typeof g||g instanceof String)&&(g=isNaN(g)?g:+g),d[c[e][0]]=g;return d},h=function(a){var b=a.split(" ");switch(b[0]){case"left":b[0]="0%";break;case"center":b[0]="50%";break;case"right":b[0]="100%"}switch(b[1]){case"top":b[1]="0";break;case"middle":b[1]="50%";break;case"bottom":b[1]="100%"}return{x:b[0],y:b[1]}};d.prototype.init=function(){var b=this;this.wrapper=a("<div>"),this.video=a("<video><source src='"+this.path+".mp4' type='video/mp4'><source src='"+this.path+".webm' type='video/webm'><source src='"+this.path+".ogv' type='video/ogg'></video>"),this.wrapper.append(this.video),this.element.prepend(this.wrapper),this.video.prop({autoplay:this.settings.autoplay,loop:this.settings.loop,volume:this.settings.volume,muted:this.settings.muted,playbackRate:this.settings.playbackRate}),a.get(this.path+".png").done(function(){b.video[0].poster=b.path+".png"}),a.get(this.path+".jpg").done(function(){b.video[0].poster=b.path+".jpg"}),a.get(this.path+".gif").done(function(){b.video[0].poster=b.path+".gif"}),this.wrapper.css({position:"absolute",top:0,left:0,bottom:0,right:0,overflow:"hidden"}),"static"===this.element.css("position")&&this.element.css("position","relative");var c=h(this.settings.position);this.video.css({margin:"auto",position:"absolute",top:c.y,left:c.x,"-webkit-transform":"translate(-"+c.x+", -"+c.y+")","-ms-transform":"translate(-"+c.x+", -"+c.y+")",transform:"translate(-"+c.x+", -"+c.y+")"}),this.resize(),this.video.bind("loadedmetadata."+e,function(){b.resize()}),a(this.element).bind("resize."+e,function(){b.resize()})},d.prototype.getVideoObject=function(){return this.video[0]},d.prototype.resize=function(){var a=this.video[0].videoHeight,b=this.video[0].videoWidth,c=this.wrapper.height(),d=this.wrapper.width();this.video.css(d/b>c/a?{width:d+2,height:"auto"}:{width:"auto",height:c+2})},d.prototype.destroy=function(){this.element.unbind(e),this.video.unbind(e),delete a[e].lookup[this.index],this.element.removeData(e),this.wrapper.remove()},a.fn[e]=function(b,c){var f;return this.each(function(){f=a.data(this,e),f&&f.destroy(),f=new d(this,b,c),f.index=a[e].lookup.push(f)-1,a.data(this,e,f)}),this},a(c).ready(function(){a(b).bind("resize."+e,function(){for(var b,c=a[e].lookup.length,d=0;c>d;d++)b=a[e].lookup[d],b&&b.resize()}),a(c).find("[data-"+e+"-bg]").each(function(b,c){var d=a(c),f=d.data(e+"-options"),h=d.data(e+"-bg");f=f?g(f):{},d[e](h,f)})})}(jQuery||Zepto,window,document);